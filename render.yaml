services:
  - type: web
    name: cafe-finder-backend
    runtime: java
    rootDirectory: backend
    buildCommand: "./mvnw clean package -DskipTests"
    startCommand: "java -jar target/*.jar"
    envVars:
      - key: MONGODB_URI
        sync: false
      - key: CAFEFINDER_APP_JWT_SECRET
        sync: false
      - key: GOOGLE_PLACES_API_KEY
        sync: false
      - key: CORS_ALLOWED_ORIGINS
        sync: false
      - key: SERVER_PORT
        value: 10000

  - type: web
    name: cafe-finder-frontend
    runtime: static
    rootDirectory: frontend
    buildCommand: "npm run build"
    staticPublishPath: "./dist"
    envVars:
      - key: VITE_API_URL
        sync: false
      - key: VITE_GOOGLE_PLACES_API_KEY
        sync: false
      - key: VITE_GOOGLE_MAPS_API_KEY
        sync: false

# Note: Using MongoDB Atlas (external) instead of Render's Postgres
# Render doesn't provide MongoDB hosting, so using Atlas with render.yaml
