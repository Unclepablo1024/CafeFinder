services:
  - type: web
    name: cafe-finder-backend
    runtime: java
    plan: free
    buildCommand: "cd backend && mvn clean package -DskipTests"
    startCommand: "cd backend && java -jar target/cafe-finder-0.0.1-SNAPSHOT.jar"
    envVars:
      - key: MONGODB_URI
        sync: false
      - key: CAFEFINDER_APP_JWT_SECRET
        sync: false
      - key: GOOGLE_PLACES_API_KEY
        sync: false
      - key: CORS_ALLOWED_ORIGINS
        sync: false
      # PORT is automatically provided by Render, no need to set it

  - type: web
    name: cafe-finder-frontend
    runtime: static
    buildCommand: "cd frontend && npm install && npm run build"
    staticPublishPath: "frontend/dist"
    envVars:
      - key: VITE_API_URL
        sync: false
      - key: VITE_GOOGLE_PLACES_API_KEY
        sync: false
      - key: VITE_GOOGLE_MAPS_API_KEY
        sync: false

# Note: Using MongoDB Atlas (external) instead of Render's Postgres
# Render doesn't provide MongoDB hosting, so using Atlas with render.yaml
